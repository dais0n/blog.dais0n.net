<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>zsh on blog.dais0n.net</title><link>https://blog.dais0n.net/tags/zsh/</link><description>Recent content in zsh on blog.dais0n.net</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 27 Jan 2019 16:00:02 +0900</lastBuildDate><atom:link href="https://blog.dais0n.net/tags/zsh/index.xml" rel="self" type="application/rss+xml"/><item><title>dotfilesの設定 in 2019</title><link>https://blog.dais0n.net/dotfiles_in_anywhere/</link><pubDate>Sun, 27 Jan 2019 16:00:02 +0900</pubDate><guid>https://blog.dais0n.net/dotfiles_in_anywhere/</guid><description>背景 自分はサーバにdotfilesや必要なコマンドをインストールするスクリプトを用意していて、サーバに入るとそのスクリプトを走らせることで 基本どのサーバでも同じ環境で作業できるようにしてます。
今回はインストールスクリプトや
どういったコマンドや設定を入れているのか、またその設定を入れる理由 OSの違いなどをどう解決しているのか を紹介できればと思います。ローカルとサーバでパフォーマンスが変わってしまうのはもったいない！
ゴール 早速ですが、自分が初めてサーバに入ると走らせているスクリプトのgifです。 上記の動画のように
dotfilesのクローン 必要なコマンドやプラグインマネージャなどインストール vimのプラグインを入れる dotfilesにシンボリックリンクを貼る zshを再起動 といったことをしてます。ここまでできるようになるのが本記事のゴールです。 サーバに入ったら必ず走らせるスクリプトなので、プラグインやコマンドはできるだけ最低限にするようにdotfilesを作るようにしてます。インストール方法は後ほど書きます
dotfilesの作成 どの環境からでも同じ設定ファイル類をダウンロードする必要があるので、githubにvimrc、zshrcなどをまとめたdotfilesというリポジトリを作ります。ついでに自分がどの環境でも入れているコマンドも紹介します。
自分のdotfilesはこちらです。
また、各設定の解説をすると長くなるため各設定で自分が意識していることを中心に記載します。
必要なコマンド 自分がどの環境でも入れているコマンド。
peco: フィルタリングツール。ディレクトリ移動、コマンド履歴。真面目にこれないと仕事ができない ghq: gitリポジトリの統一的な管理。色々サーバ入っているとどこにcloneしたのかわからなくなるので必須。またpecoと組み合わせるとリポジトリをすぐ見つけることができる。 ag: 高速grepツール。ソースコードを検索する際に使う zshrc 続いてzshrcです。自分のzshrcは200行くらいしかなく短いのですが、意識していることは
履歴を利用する設定を入れる 一度調べて打ったコマンドはもう一度打ちたくない
cd履歴をpecoで絞り込む コマンド履歴をpecoで絞り込む 過去の履歴からコマンドの補完が行われる(zsh-autosuggestions) プロンプトに必要な情報を載せる 本番環境でうっかりコマンド実行、実行しちゃいけないディレクトリでうっかり(ryがないようにする
git関係(今commitできるものがあるか・pullできるものがあるか) hostname pwd 地味に便利なsyntaxハイライト(zsh-syntax-highlighting) プログラムがあるかの確認などにwhichとかしなくて良い。打っている途中でコマンドが間違っているか視覚的に気づける
vimrc 続いてvimrcです。vimrcも削りに削って200行くらいですが、意識していることは
vimscriptのみで動くプラグインを入れる なんかpythonとかluaとか必要とするプラグインは使わないです。プラグインマネージャはvim-plugを使ってます。
おすすめプラグインはvimawesomeで探すと良いと思います。利用者数順やstar数順でプラグインが紹介されていて、ジャンル別のランキングも見れます。
ctrlp.vim: C-pで最近開いたファイル開くやつ nerd tree: finder vim-gitgutter: gitで編集しているファイルを編集すると+-っていう差分を示すマークが出るようになるやつ vim-better-whitespace: ワンコマンドでいらない空白を排除するやつ gitconfig &amp;amp; gitignore gitconfigは地味に便利なので、dotfilesで管理することをおすすめします。 aliasの設定が便利です。
co = checkout s = status --short --branch b = branch -a cm = commit -v cma = commit -a -v d = diff -C --stat -p dc = diff --cached br = branch s = status --short --branch rv = remote --verbose l = log --graph --date=short --decorate=short --pretty=format:&amp;#39;%C(red)%h　%C(reset)-%C(yellow)%d %Creset%s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39; ll = log --graph --all --abbrev-commit --date=relative --pretty=format:&amp;#39;%C(red)%h　%C(reset)-%C(yellow)%d %Creset%s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39; gitignoreはグローバルにignoreしたいファイルを書きます。キャッシュ系のファイルと、.</description></item><item><title>zshでfishライクなシェルを楽に作る</title><link>https://blog.dais0n.net/zsh_like_fish/</link><pubDate>Sun, 18 Feb 2018 13:56:02 +0900</pubDate><guid>https://blog.dais0n.net/zsh_like_fish/</guid><description>きっかけ 普段fish使ってるエンジニアに「zshでもfishっぽく使う設定をできるだけ設定ファイル少なく書きたい」と相談されたので一緒に設定ファイルを作ったら良い感じのができた
ゴール zshでfishライクなシェルを作る 履歴検索などはpecoなどを使いインタラクティブにフィルタリングし、コマンド履歴をフル活用する 設定はできるだけ少なく 最終的にこんな感じになります 上記で
コマンド予測補完 コマンドシンタックスハイライト コマンド履歴インクリメンタルサーチ ディレクトリ履歴インクリメンタルサーチ をやってます。
今回使用するプラグインなどの紹介 zplug 今回は設定を少なくし、プラグインの導入を楽にしたいのでzshのプラグインマネージャであるzplugを入れてプラグインを管理します
こんな感じで定義したプラグインを入れてくれます！かっこいいですね zshのプラグインマネージャには色々あります(antigen、oh-my-zsh)が、zplugには以下の特徴があります。
軽い 依存関係を保ったインストールやブランチロック・リビジョンロックができる プラグインマネージャの範疇を超えることはしない プラグインマネージャには、上記の機能があれば十分なのでzplugを採用しました。
使い方は、zshrcに以下のようにプラグインを定義した後、zplug installを打つと.zplug以下のディレクトリにプラグインをインストールしてくれます。
zplug &amp;#39;felixr/docker-zsh-completion&amp;#39; zsh-autosuggestions zshをfishっぽくするエッセンスの1つ目で、fishのように途中まで文字を入力すると過去の入力履歴から補完が出てくるやつです。
候補が出てきたら、C-fで補完を行の最後まで確定、Option-fで単語毎に確定できます。
Optionはターミナルの設定でOptionをmetaキーに割り当てないと効かないので気をつけてください。
zsh-users/zsh-syntax-highlighting zshをfizhっぽくするエッセンスの2つ目でfishのように、コマンドのシンタックスハイライトをしてくれます。
(公式より引用)
これなら打っている途中でコマンドが間違っているかわかる 存在しないコマンドは赤くなるので、which打つ手間省けます
peco 標準入力から受けた行データをインクリメンタルサーチして、選択した行を標準出力に返すコマンドです peco コマンドでググれば沢山でてきます。詳しくはこちらでも解説しているので、是非見て下さい。
anyframe pecoとzshの相性は最強なのですが、若干シェルの関数を書く必要があります。 便利な関数は決まっているので、特に便利な以下の関数をまとめてくれているプラグインです
コマンド履歴をpecoで選択して実行する関数 ディレクトリ履歴をpecoで選択して実行する関数 プロセスをpecoで選択後killする関数 tmux sessionをpecoで選択する関数 git checkoutをpecoで選択して実行する関数 ghqコマンドで管理しているリポジトリに移動する プラグインを入れて、どの関数をどのショートカットで使うかを設定するだけです。 ちなみにpercol、fzfでも大丈夫で、インストールしてあるフィルタリングツールを勝手に選択して使ってくれます。
今回は特に便利な上記の太字の機能だけ入れていきます
導入方法 上記で紹介したものをインストールしていきます。.zshrcに書いていきます
zplugで上記で定義したプラグインを入れます zsh-autosuggestions zsh-syntax-highlighting peco anyframe # zplugがなければzplugをインストール後zshを再起動 if [ ! -e &amp;#34;${HOME}/.zplug/init.zsh&amp;#34; ]; then curl -sL --proto-redir -all,https https://raw.</description></item></channel></rss>